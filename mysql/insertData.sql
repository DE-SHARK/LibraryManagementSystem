-- 向book表插入测试数据
INSERT INTO book (isbn, title, author, published_date, clc_number, location) VALUES
    ('9787020002207', '红楼梦', '曹雪芹', '1982-01-01', 'I242.4', 'A区-01-01'),
    ('9787020008728', '三国演义', '罗贯中', '1980-05-01', 'I242.4', 'A区-01-02'),
    ('9787020008735', '水浒传', '施耐庵', '1980-06-01', 'I242.4', 'A区-01-03'),
    ('9787111213826', 'Java编程思想', 'Bruce Eckel', '2007-06-01', 'TP312', 'B区-02-01'),
    ('9787115417305', 'Python编程从入门到实践', 'Eric Matthes', '2016-07-01', 'TP312', 'B区-02-02'),
    ('9787111636663', '深入理解计算机系统', 'Randal E. Bryant', '2016-11-01', 'TP301', 'B区-03-01'),
    ('9787508344980', '经济学原理', '曼昆', '2003-08-01', 'F0', 'C区-01-01'),
    ('9787301109489', '法理学', '张文显', '2007-03-01', 'D90', 'C区-02-01'),
    ('9787040396638', '高等数学', '同济大学数学系', '2014-07-01', 'O13', 'D区-01-01'),
    ('9787115546081', '算法导论', 'Thomas H.Cormen', '2020-04-01', 'TP301', 'B区-03-02');

-- 为每本书添加对应的副本
INSERT INTO book_copy (isbn, acquisition_date) VALUES
    ('9787020002207', '2022-01-01'),
    ('9787020002207', '2022-01-01'),
    ('9787020008728', '2022-01-02'),
    ('9787020008728', '2022-01-02'),
    ('9787020008735', '2022-01-03'),
    ('9787111213826', '2022-02-01'),
    ('9787111213826', '2022-02-01'),
    ('9787115417305', '2022-02-02'),
    ('9787111636663', '2022-02-03'),
    ('9787508344980', '2022-03-01'),
    ('9787301109489', '2022-03-02'),
    ('9787040396638', '2022-04-01'),
    ('9787040396638', '2022-04-01'),
    ('9787115546081', '2022-04-02');

-- 首先创建一些测试用户
INSERT INTO user (username, password, role) VALUES
    ('zhang_san', 'password123', 'BORROWER'),
    ('li_si', 'password123', 'BORROWER'),
    ('wang_wu', 'password123', 'BORROWER'),
    ('zhao_liu', 'password123', 'BORROWER'),
    ('qian_qi', 'password123', 'BORROWER');

-- 插入各种状态的借阅记录
INSERT INTO book_borrow 
    (book_copy_id, user_id, create_date, status, borrow_date, return_date, expected_borrow_date) 
VALUES
    -- 已归还的记录
    (1, 1, '2023-01-01 10:00:00', 'RETURNED', '2023-01-01 10:00:00', '2023-01-15 14:30:00', '2023-01-31'),
    (2, 2, '2023-01-05 14:20:00', 'RETURNED', '2023-01-05 14:20:00', '2023-01-20 16:45:00', '2023-02-04'),
    
    -- 当前借出的记录
    (3, 1, '2024-01-10 09:15:00', 'BORROWED', '2024-01-10 09:15:00', NULL, '2024-02-09'),
    (4, 2, '2024-01-15 11:30:00', 'BORROWED', '2024-01-15 11:30:00', NULL, '2024-02-14'),
    
    -- 逾期未还的记录
    (5, 3, '2023-12-01 15:45:00', 'OVERDUE', '2023-12-01 15:45:00', NULL, '2023-12-31'),
    (6, 1, '2023-12-10 16:20:00', 'OVERDUE', '2023-12-10 16:20:00', NULL, '2024-01-09'),
    
    -- 预约记录
    (7, 2, '2024-01-20 10:00:00', 'RESERVED', NULL, NULL, '2024-02-19'),
    
    -- 更多已归还的历史记录
    (8, 3, '2023-11-01 09:00:00', 'RETURNED', '2023-11-01 09:00:00', '2023-11-25 15:30:00', '2023-12-01'),
    (9, 1, '2023-11-15 14:20:00', 'RETURNED', '2023-11-15 14:20:00', '2023-12-10 11:20:00', '2023-12-15'),
    (10, 2, '2023-12-20 11:30:00', 'RETURNED', '2023-12-20 11:30:00', '2024-01-05 16:45:00', '2024-01-19');

-- 更新对应的book_copy状态
UPDATE book_copy SET status = 'BORROWED' WHERE id IN (3, 4);
UPDATE book_copy SET status = 'BORROWED' WHERE id IN (5, 6);
UPDATE book_copy SET status = 'RESERVED' WHERE id = 7;